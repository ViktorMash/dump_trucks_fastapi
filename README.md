# Система мониторинга самосвалов
Веб-приложение на FastAPI для отслеживания загрузки самосвалов различных моделей, работающих в карьере. Система позволяет контролировать степень загрузки самосвалов относительно их максимальной грузоподъемности и выявлять случаи перегруза.

## Функциональность
- REST API для управления самосвалами и моделями
- Получение списка самосвалов с информацией о модели, максимальной грузоподъемности, текущей загрузке и проценте перегруза
- Фильтрация списка самосвалов по модели и бортовому номеру
- Автоматическое вычисление процента перегруза и статуса перегрузки
- Пагинация результатов

## Структура проекта
```
README.md            # Документация проекта
main.py              # Точка входа приложения
db.sqlite3           # База данных SQLite
requirements.txt     # Зависимости проекта
app/                 # Основной пакет приложения
  dependencies.py    # Зависимости
  api/               # Слой представления
  services/          # Сервисный слой + бизнес логика
  core/              # Бизнес логика
  db/                # Слой БД
  schemas/           # Pydantic схемы валидации + исключения
  config/            # Конфигурация приложения
  utils/             # Утилиты
```

## Предварительные требования
- Python 3.11+
- FastAPI
- SQLAlchemy 2.0+
- Pydantic 2.0+
- SQLite (или любая другая поддерживаемая СУБД)

## Установка
1. Клонировать репозиторий: `git clone https://github.com/ViktorMash/dump_trucks_fastapi.git`
2. Создать виртуальное окружение: `python -m venv venv`
3. Активировать виртуальное окружение:
   - Linux/Mac: `source venv/bin/activate`
   - Windows: `venv\Scripts\activate`
4. Установить зависимости: `pip install -r requirements.txt`

## Информация о базе данных
- Проект использует SQLite в качестве СУБД по умолчанию
- База данных создается автоматически при первом запуске
- Тестовые данные добавляются автоматически при инициализации

**Примечание:** Если вы хотите использовать другую СУБД, измените настройки подключения в файле `app/config/config.py` в классе `DataBaseSettings` и установите соответствующие драйверы.

## Запуск
1. Перейти в каталог приложения: `cd dump_trucks_fastapi`
2. Запустить сервер: `python main.py` или `uvicorn main:app --reload`
3. Открыть в браузере:
   - API документация (Swagger): http://127.0.0.1:8000/docs
   - Альтернативная документация (ReDoc): http://127.0.0.1:8000/redoc
4. Остановить сервер: `Ctrl + C`


## Тестовые данные
При первом запуске автоматически создаются:
- 2 модели самосвалов: БЕЛАЗ (120т), Komatsu (110т)
- 3 самосвала: 101 (100т), 102 (125т), K103 (120т)

## Если возникли проблемы:
- Убедитесь, что порт 8000 не занят другими приложениями
- Проверьте, что виртуальное окружение активировано
- Проверьте наличие всех необходимых пакетов
- Удалите файл `db.sqlite3` для пересоздания базы данных